<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¹Ø¬Ù„Ø© ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #00d2ff; --success: #00c851; --danger: #ff4444; }
        
        body { 
            margin: 0; font-family: 'Cairo', sans-serif; background: #0f172a; color: white; 
            min-height: 100vh; overflow-x: hidden; overflow-y: auto;
        }

        #startScreen { 
            position: fixed; inset: 0; z-index: 2000; background: #0f172a; 
            display: flex; justify-content: center; align-items: center; padding: 20px;
        }
        .login-card { 
            background: rgba(255, 255, 255, 0.05); padding: 30px; border-radius: 24px; 
            text-align: center; border: 1px solid var(--primary); width: 100%; max-width: 380px; 
        }

        .main-layout { 
            display: none; padding: 10px; gap: 10px; 
            flex-direction: row; justify-content: center; align-items: flex-start; flex-wrap: wrap;
        }

        .game-container { 
            width: 100%; max-width: 500px; text-align: center; 
            display: flex; flex-direction: column; align-items: center;
        }

        .leaderboard { 
            width: 100%; max-width: 280px; background: rgba(255, 255, 255, 0.05); 
            border-radius: 20px; padding: 15px; border: 1px solid rgba(255,255,255,0.1); 
        }

        .stats-bar { 
            width: 100%; display: flex; justify-content: space-around; align-items: center;
            background: rgba(255,255,255,0.1); padding: 8px; border-radius: 30px; 
            margin-bottom: 5px; font-size: 0.85rem; box-sizing: border-box;
        }

        .wheel-box { 
            position: relative; width: 70vw; height: 70vw; max-width: 320px; max-height: 320px; margin: 10px auto; 
        }
        #canvas { width: 100% !important; height: 100% !important; border-radius: 50%; border: 5px solid white; transition: transform 4s cubic-bezier(0.1, 0, 0.1, 1); }
        .pointer { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); z-index: 100; width: 40px; }

        input, button.main-btn { 
            width: 100%; padding: 12px; border-radius: 12px; border: none; margin: 8px 0; 
            font-family: 'Cairo'; font-size: 1.1rem; box-sizing: border-box; 
        }
        button.main-btn { background: var(--primary); cursor: pointer; font-weight: bold; color: #0f172a; transition: 0.3s; }

        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; justify-content: center; align-items: center; z-index: 3000; padding: 15px; }
        .modal { background: #1e293b; width: 100%; max-width: 450px; padding: 25px; border-radius: 20px; text-align: center; border: 2px solid var(--primary); }

        /* ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ Ø§Ù„Ø­Ø§Ø³Ù…Ø© */
        @media (max-width: 768px) {
            .main-layout { flex-direction: column; align-items: center; padding: 5px; gap: 5px; }
            .game-container { order: 1; width: 100%; margin-bottom: 0; }
            .wheel-box { width: 65vw; height: 65vw; margin: 5px auto; }
            .leaderboard { 
                order: 2; width: 95%; max-width: 100%; 
                margin-top: 5px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ø¬Ø¯Ø§Ù‹ Ù„ØªÙ‚ØªØ±Ø¨ Ù…Ù† Ø§Ù„Ø²Ø± */
                padding: 10px;
            }
            .stats-bar { margin-bottom: 5px; }
            button.main-btn { margin: 5px 0; }
        }
    </style>
</head>
<body>

    <audio id="bgMusic" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>
    <audio id="spinSound" src="https://assets.mixkit.co/active_storage/sfx/2005/2005-preview.mp3"></audio>
    <audio id="correctSound" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>
    <audio id="wrongSound" src="https://assets.mixkit.co/active_storage/sfx/2955/2955-preview.mp3"></audio>

    <div id="startScreen">
        <div class="login-card">
            <h1>ğŸ¡ Ø¹Ø¬Ù„Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ©</h1>
            <input type="text" id="pName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨">
            <input type="text" id="pClass" placeholder="Ø§Ù„ØµÙ">
            <button class="main-btn" onclick="startGame()">Ø¯Ø®ÙˆÙ„</button>
        </div>
    </div>

    <div class="main-layout" id="mainLayout">
        <div class="game-container">
            <div class="stats-bar">
                <span>ğŸ‘¤ <span id="statName">--</span></span>
                <span>ğŸ… <b id="statScore">0</b></span>
                <button onclick="location.reload()" style="background:var(--danger); border:none; color:white; padding:2px 10px; border-radius:8px; cursor:pointer;">Ø®Ø±ÙˆØ¬</button>
            </div>
            
            <div class="wheel-box">
                <img src="https://cdn-icons-png.flaticon.com/512/2722/2722987.png" class="pointer">
                <canvas id="canvas" width="500" height="500"></canvas>
            </div>
            <button class="main-btn" id="spinBtn" style="max-width:200px;" onclick="spinWheel()">ğŸ¡ Ø¯ÙÙˆÙ‘Ø± Ø§Ù„Ø¹Ø¬Ù„Ø©</button>
        </div>

        <div class="leaderboard">
            <h3 style="text-align:center; margin:0 0 10px 0; font-size: 1rem;">ğŸ† Ø§Ù„Ù…ØªØµØ¯Ø±ÙˆÙ†</h3>
            <div id="scoresList"></div>
        </div>
    </div>

    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <div id="timerContainer">â± Ø§Ù„ÙˆÙ‚Øª: <b id="secondsText">10</b></div>
            <h2 id="qText">Ø§Ù„Ø³Ø¤Ø§Ù„ØŸ</h2>
            <div id="optionsGrid"></div>
        </div>
    </div>

<script>
    const originalQuestions = [
        {q: "Ù…Ø§ Ù‡Ùˆ Ø§Ø®ØªØµØ§Ø± ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©ØŸ", o: ["RAM", "CPU", "USB"], a: 1},
        {q: "ØªØ¹ØªØ¨Ø± Ø§Ù„Ø´Ø§Ø´Ø© Ù…Ù† ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù€ ...ØŸ", o: ["Ø¥Ø®Ø±Ø§Ø¬", "Ø¥Ø¯Ø®Ø§Ù„", "Ù…Ø¹Ø§Ù„Ø¬Ø©"], a: 0},
        {q: "Ø£ÙŠ Ù…Ù…Ø§ ÙŠÙ„ÙŠ ÙŠØ¹ØªØ¨Ø± Ù†Ø¸Ø§Ù… ØªØ´ØºÙŠÙ„ØŸ", o: ["Word", "Windows", "Youtube"], a: 1},
        {q: "Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù Ù†Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø®ØªØµØ§Ø±ØŸ", o: ["Ctrl+S", "Ctrl+P", "Ctrl+C"], a: 0},
        {q: "Ø§Ù„ÙØ£Ø±Ø© ØªØ¹ØªØ¨Ø± Ù…Ù† ÙˆØ­Ø¯Ø§ØªØŸ", o: ["Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬", "Ø¥Ø¯Ø®Ø§Ù„", "Ø§Ù„ØªØ®Ø²ÙŠÙ†"], a: 1},
        {q: "Ù…Ø§ Ù‡ÙŠ Ù„ØºØ© Ø§Ù„Ø¹ØµØ±ØŸ", o: ["Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©", "Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª"], a: 0}
    ];

    let availableQuestions = [...originalQuestions];
    let score = 0;
    let currentRotation = 0;
    let isSpinning = false;
    let timerInterval;

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const colors = ['#FF5E5E', '#FFB84E', '#4E9FFF', '#4EFC9F', '#B34EFC', '#FC4EED', '#FCEE4E', '#4EFCF0'];

    function drawWheel() {
        const segments = 8;
        const angle = 2 * Math.PI / segments;
        for(let i=0; i<segments; i++) {
            ctx.beginPath(); ctx.fillStyle = colors[i]; ctx.moveTo(250, 250);
            ctx.arc(250, 250, 250, i * angle, (i + 1) * angle); ctx.fill();
            ctx.save(); ctx.translate(250, 250); ctx.rotate(i * angle + angle/2);
            ctx.fillStyle = "white"; ctx.font = "bold 35px Cairo";
            ctx.fillText(i + 1, 150, 10); ctx.restore();
        }
    }

    function startGame() {
        const n = document.getElementById('pName').value;
        const c = document.getElementById('pClass').value;
        if(!n || !c) return alert("Ø³Ø¬Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ");
        document.getElementById('statName').innerText = n + " (" + c + ")";
        document.getElementById('startScreen').style.display = 'none';
        document.getElementById('mainLayout').style.display = 'flex';
        drawWheel();
        updateLeaderboard();
        document.getElementById('bgMusic').volume = 0.1;
        document.getElementById('bgMusic').play().catch(()=>{});
    }

    function spinWheel() {
        if(isSpinning || availableQuestions.length === 0) return;
        isSpinning = true;
        document.getElementById('spinSound').play();
        const extraDeg = Math.floor(Math.random() * 360) + 1800;
        currentRotation += extraDeg;
        canvas.style.transform = `rotate(${currentRotation}deg)`;
        setTimeout(() => { isSpinning = false; showQuestion(); }, 4000);
    }

    function showQuestion() {
        const qIndex = Math.floor(Math.random() * availableQuestions.length);
        const q = availableQuestions[qIndex];
        const grid = document.getElementById('optionsGrid');
        grid.innerHTML = '';
        document.getElementById('qText').innerText = q.q;
        document.getElementById('modalOverlay').style.display = 'flex';
        
        let timeLeft = 10;
        document.getElementById('secondsText').innerText = timeLeft;
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timeLeft--;
            document.getElementById('secondsText').innerText = timeLeft;
            if(timeLeft <= 0) {
                clearInterval(timerInterval);
                availableQuestions.splice(qIndex, 1);
                document.getElementById('modalOverlay').style.display = 'none';
            }
        }, 1000);

        q.o.forEach((opt, i) => {
            const b = document.createElement('button');
            b.className = 'main-btn';
            b.style.background = "rgba(255,255,255,0.1)";
            b.style.color = "white";
            b.innerText = opt;
            b.onclick = () => {
                clearInterval(timerInterval);
                if(i === q.a) {
                    score += 100;
                    document.getElementById('statScore').innerText = score;
                    confetti();
                    document.getElementById('correctSound').play();
                } else {
                    document.getElementById('wrongSound').play();
                }
                availableQuestions.splice(qIndex, 1);
                saveScore();
                setTimeout(() => { document.getElementById('modalOverlay').style.display = 'none'; }, 1500);
            };
            grid.appendChild(b);
        });
    }

    function saveScore() {
        let players = JSON.parse(localStorage.getItem('ranking') || '[]');
        const name = document.getElementById('statName').innerText;
        const idx = players.findIndex(p => p.name === name);
        if(idx > -1) players[idx].score = Math.max(players[idx].score, score);
        else players.push({name, score});
        localStorage.setItem('ranking', JSON.stringify(players));
        updateLeaderboard();
    }

    function updateLeaderboard() {
        const players = JSON.parse(localStorage.getItem('ranking') || '[]');
        players.sort((a,b) => b.score - a.score);
        document.getElementById('scoresList').innerHTML = players.map(p => 
            `<div style="display:flex; justify-content:space-between; padding:5px; background:rgba(255,255,255,0.05); margin-bottom:3px; border-radius:8px; border-right:3px solid var(--primary); font-size:0.8rem;">
                <span>${p.name}</span><b>${p.score}</b>
            </div>`
        ).join('');
    }
</script>
</body>
</html>











