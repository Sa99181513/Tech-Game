<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¹Ø¬Ù„Ø© ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <style>
        :root { --primary:#00d2ff; --success:#00c851; --danger:#ff4444; }

        body {
            margin:0;
            font-family:'Cairo',sans-serif;
            background:#0f172a;
            color:white;
            min-height:100vh;
            display:flex;
            flex-direction:column;
            overflow-x:hidden;
        }

        #startScreen{
            position:fixed;
            inset:0;
            z-index:2000;
            background:#0f172a;
            display:flex;
            justify-content:center;
            align-items:center;
            padding:20px;
        }

        .login-card{
            background:rgba(255,255,255,0.05);
            padding:30px;
            border-radius:24px;
            text-align:center;
            border:1px solid var(--primary);
            width:100%;
            max-width:380px;
        }

        .main-layout{
            display:none;
            flex:1;
            padding:15px;
            gap:20px;
            flex-direction:row;
            justify-content:center;
            align-items:flex-start;
            flex-wrap:wrap;
        }

        .leaderboard{
            width:100%;
            max-width:280px;
            background:rgba(255,255,255,0.05);
            border-radius:20px;
            padding:15px;
            max-height:80vh;
            overflow-y:auto;
            border:1px solid rgba(255,255,255,0.1);
        }

        .game-container{
            flex:1;
            min-width:300px;
            max-width:500px;
            text-align:center;
        }

        .wheel-box{
            position:relative;
            width:85vw;
            height:85vw;
            max-width:380px;
            max-height:380px;
            margin:20px auto;
        }

        #canvas{
            width:100%!important;
            height:100%!important;
            border-radius:50%;
            border:5px solid white;
            transition:transform 4s cubic-bezier(0.1,0,0.1,1);
        }

        .pointer{
            position:absolute;
            top:-15px;
            left:50%;
            transform:translateX(-50%);
            z-index:100;
            width:40px;
        }

        input,button.main-btn,.danger-btn{
            width:100%;
            padding:12px;
            border-radius:12px;
            border:none;
            margin:10px 0;
            font-family:'Cairo';
            font-size:1.1rem;
            box-sizing:border-box;
        }

        button.main-btn{
            background:var(--primary);
            cursor:pointer;
            font-weight:bold;
            color:#0f172a;
        }

        .danger-btn{
            background:var(--danger);
            color:white;
            cursor:pointer;
            border:2px dashed white;
            display:none;
        }

        .correct-ans{background-color:var(--success)!important;color:white!important;transform:scale(1.05);}
        .wrong-ans{background-color:var(--danger)!important;color:white!important;}

        .stats-bar{
            display:flex;
            justify-content:center;
            gap:15px;
            background:rgba(255,255,255,0.1);
            padding:10px;
            border-radius:30px;
            margin-bottom:15px;
            font-size:0.9rem;
            flex-wrap:wrap;

            /* âœ… ØªØ¹Ø¯ÙŠÙ„ ÙÙ‚Ø· */
            position:sticky;
            top:10px;
            z-index:100;
        }

        .modal-overlay{
            position:fixed;
            inset:0;
            background:rgba(0,0,0,0.95);
            display:none;
            justify-content:center;
            align-items:center;
            z-index:3000;
            padding:15px;
        }

        .modal{
            background:#1e293b;
            width:100%;
            max-width:450px;
            padding:25px;
            border-radius:20px;
            text-align:center;
            border:2px solid var(--primary);
        }

        @media (max-width:768px){
            .main-layout{flex-direction:column;align-items:center;}
            .leaderboard{order:2;max-width:100%;max-height:250px;}
            .game-container{order:1;width:100%;}
        }
    </style>
</head>

<body>

<audio id="bgMusic" loop src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>
<audio id="spinSound" src="https://assets.mixkit.co/active_storage/sfx/2005/2005-preview.mp3"></audio>
<audio id="correctSound" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>
<audio id="wrongSound" src="https://assets.mixkit.co/active_storage/sfx/2955/2955-preview.mp3"></audio>

<div id="startScreen">
    <div class="login-card">
        <h1 id="gameTitle">ğŸ¡ Ø¹Ø¬Ù„Ø© ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h1>
        <p style="font-size:0.9rem;color:#888;">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©</p>
        <input id="pName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨">
        <input id="pClass" placeholder="Ø§Ù„ØµÙ">
        <button class="main-btn" onclick="startGame()">Ø¯Ø®ÙˆÙ„</button>
        <button id="adminClearBtn" class="danger-btn" onclick="clearAllData()">Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    </div>
</div>

<div class="main-layout" id="mainLayout">
    <div class="leaderboard">
        <h3 style="text-align:center;margin-top:0;">ğŸ† Ø§Ù„Ù…ØªØµØ¯Ø±ÙˆÙ†</h3>
        <div id="scoresList"></div>
    </div>

    <div class="game-container">
        <div class="stats-bar">
            <span>ğŸ‘¤ <span id="statName">--</span></span>
            <span>ğŸ… Ø§Ù„Ù†Ù‚Ø§Ø·: <b id="statScore">0</b></span>
            <button onclick="location.reload()" style="background:var(--danger);border:none;color:white;padding:2px 10px;border-radius:8px;">Ø®Ø±ÙˆØ¬</button>
        </div>

        <div class="wheel-box">
            <img src="https://cdn-icons-png.flaticon.com/512/2722/2722987.png" class="pointer">
            <canvas id="canvas" width="500" height="500"></canvas>
        </div>

        <button class="main-btn" id="spinBtn" style="max-width:200px;" onclick="spinWheel()">ğŸ¡ Ø¯ÙˆÙ‘Ø± Ø§Ù„Ø¹Ø¬Ù„Ø©</button>
    </div>
</div>

<div class="modal-overlay" id="modalOverlay">
    <div class="modal">
        <div id="timerContainer">â± Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <b id="secondsText">10</b></div>
        <h2 id="qText">Ø§Ù„Ø³Ø¤Ø§Ù„ØŸ</h2>
        <div id="optionsGrid"></div>
    </div>
</div>

<script>
/* ---- Ù†ÙØ³ ÙƒÙˆØ¯Ùƒ Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± ---- */

let score=0,currentRotation=0,isSpinning=false,timerInterval,timeLeft=10;

const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
const colors=['#FF5E5E','#FFB84E','#4E9FFF','#4EFC9F','#B34EFC','#FC4EED','#FCEE4E','#4EFCF0'];

function drawWheel(){
    const segments=8,angle=2*Math.PI/segments;
    for(let i=0;i<segments;i++){
        ctx.beginPath();
        ctx.fillStyle=colors[i];
        ctx.moveTo(250,250);
        ctx.arc(250,250,250,i*angle,(i+1)*angle);
        ctx.fill();
        ctx.save();
        ctx.translate(250,250);
        ctx.rotate(i*angle+angle/2);
        ctx.fillStyle="white";
        ctx.font="bold 35px Cairo";
        ctx.fillText(i+1,150,10);
        ctx.restore();
    }
}

function startGame(){
    const n=pName.value,c=pClass.value;
    if(!n||!c) return alert("Ø³Ø¬Ù„ Ø§Ø³Ù…Ùƒ ÙˆÙØµÙ„Ùƒ");

    bgMusic.volume=0.2;
    bgMusic.play().catch(()=>{});

    statName.innerText=n+" ("+c+")";
    startScreen.style.display="none";
    mainLayout.style.display="flex";

    /* âœ… ØªØ¹Ø¯ÙŠÙ„ ÙÙ‚Ø· */
    window.scrollTo({top:0,behavior:"instant"});

    drawWheel();
    updateLeaderboard();
}

/* Ø¨Ù‚ÙŠØ© Ù…Ù†Ø·Ù‚ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙƒÙ…Ø§ Ù‡Ùˆ */

</script>

</body>
</html>







